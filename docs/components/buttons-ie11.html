<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>PayPal JS SDK Buttons IE11 Test Page</title>
    </head>
    <body>
        <h1>PayPal JS SDK Buttons IE11 Test Page</h1>
        <div id="buttons-container"></div>

        <script src="https://unpkg.com/@paypal/paypal-js@4.2.1/dist/iife/paypal-js.legacy.min.js"></script>
        <script>
            var defaultOptions = {
                "client-id": "test",
                "data-page-type": "checkout",
            };

            function getOptionsFromQueryString() {
                var customOptions = window.location.search
                    .replace("?", "")
                    .split("&")
                    .map(function (value) {
                        return value.split("=");
                    })
                    .reduce(function (acc, val) {
                        if (!val.length) {
                            return;
                        }
                        var key = val[0];
                        if (key) {
                            acc[key] = val[1];
                        }

                        return acc;
                    }, {});

                return customOptions;
            }

            var optionsFromQueryString = getOptionsFromQueryString();
            var options = Object.keys(optionsFromQueryString).length
                ? optionsFromQueryString
                : defaultOptions;

            window
                .paypalLoadScript(options)
                .then(function (paypal) {
                    paypal.Buttons().render("#buttons-container");
                })
                .catch(function (err) {
                    console.error(err);
                });
        </script>
    </body>
</html>
